<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <title>NextBinge</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="{% static 'result.css' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</head>
<body style="background-color: black; color: white;">
    <h1 id = "logo" align=center style="font-weight: bold; font-size: 8em; padding: 25px; display: none;"><a href="{% url 'index' %}">NextBinge</a></h1>
    <!-- <form class="form-inline" style="position: absolute; left: 28%;" action="" method="POST">
        
        <div id="prefetch" class="demo">
            <input id="searchbox" class="typeahead" type="text" placeholder="Search Movies..." name="searchvalue" autocomplete="off">
          </div>
          <button id="add" class="btn my-2 my-sm-0" type="button">Add</button>
        <button id="search" class="btn my-2 my-sm-0" type="button">Search</button>
    </form> -->
    <div id = "desc" align=center style="font-size: x-large; display: none;">After evaluating your taste we filtered out three movies you might like.</div>
    <div id="movierow">
        <a href="{% url 'movie' id.0 %}">
        <div id = "first" class="gall" style = "margin-left: 150px; display: none; margin-top: 40px; padding: 15px; border: 0px solid #ccc; float: left; width: 300px;">
            <div class="w3-card-4">
                <div class="w3-display-container w3-text-white">
                    <img id = "one" src="" alt="" style="width:100%" onload="$(this).fadeIn('slow');">
                </div>
            </div>
        </div>
        </a>
        
        <a href="{% url 'movie' id.1 %}">
        <div id = "second" class="gall" style = "margin-left: 150px; display: none; margin-top: 40px; padding: 15px; border: 0px solid #ccc; float: left; width: 300px;">
            <div class="w3-card-4">
                <div class="w3-display-container w3-text-white">
                    <img id = "two" src="" alt="" style="width:100%" onload="$(this).fadeIn('slow');">
                </div>
            </div>
        </div>
        </a>
        
        <a href="{% url 'movie' id.2 %}">
        <div id = "third" class="gall" style = "margin-left: 150px; display: none; margin-top: 40px; padding: 15px; border: 0px solid #ccc; float: left; width: 300px;">
            <div class="w3-card-4">
                <div class="w3-display-container w3-text-white">
                    <img id = "three" src="" alt="" style="width:100%" onload="$(this).fadeIn('slow');">
                </div>
            </div>
        </div>
        </a>
    </div>
    <script src="http://twitter.github.io/typeahead.js/releases/latest/typeahead.bundle.js"></script>
       <script src="{% static 'main.js' %}"></script>
       <script>
           var movies = {{ movies|safe }};
           $.getJSON("https://api.themoviedb.org/3/search/movie?api_key=7346d90da037566a43b6a0414c77ea40&query="+movies[0]+ "&callback=?", function(json) {
                if (json.results[0] != null){
                    var imagelink = "http://image.tmdb.org/t/p/w500/"+json.results[0].poster_path;
                    $("#one").attr("src", imagelink);
                }
                else {
                    $.getJSON("https://api.themoviedb.org/3/search/movie?api_key=7346d90da037566a43b6a0414c77ea40&query=Interstellar&callback=?", function(json) {
                        var imagelink = "http://image.tmdb.org/t/p/w500/"+json.results[0].poster_path;
                        $("#one").attr("src", imagelink);
                    });
                }
           });
           $.getJSON("https://api.themoviedb.org/3/search/movie?api_key=7346d90da037566a43b6a0414c77ea40&query="+movies[1]+ "&callback=?", function(json) {
                if (json.results[0] != null){
                    var imagelink = "http://image.tmdb.org/t/p/w500/"+json.results[0].poster_path;
                    $("#two").attr("src", imagelink);
                }
                else {
                    $.getJSON("https://api.themoviedb.org/3/search/movie?api_key=7346d90da037566a43b6a0414c77ea40&query=Interstellar&callback=?", function(json) {
                        var imagelink = "http://image.tmdb.org/t/p/w500/"+json.results[0].poster_path;
                        $("#two").attr("src", imagelink);
                    });
                }
           });
           $.getJSON("https://api.themoviedb.org/3/search/movie?api_key=7346d90da037566a43b6a0414c77ea40&query="+movies[2]+ "&callback=?", function(json) {
                if (json.results[0] != null){
                    var imagelink = "http://image.tmdb.org/t/p/w500/"+json.results[0].poster_path;
                    $("#three").attr("src", imagelink);
                }
                else {
                    $.getJSON("https://api.themoviedb.org/3/search/movie?api_key=7346d90da037566a43b6a0414c77ea40&query=Interstellar&callback=?", function(json) {
                        var imagelink = "http://image.tmdb.org/t/p/w500/"+json.results[0].poster_path;
                        $("#three").attr("src", imagelink);
                    });
                }
           });
           $.fx.speeds.slow = 1000;
           $.fx.speeds.fast = 800;
           $("#logo").fadeIn("slow",function(){
                $("#desc").fadeIn("slow", function(){
                    $("#first").fadeIn("fast", function(){
                        $("#second").fadeIn("fast", function(){
                            $("#third").fadeIn("fast");
                        });
                    });
                });
            });

       </script>
</body>
